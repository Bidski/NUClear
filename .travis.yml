language: cpp
env:
  - COMPILER="gcc-4.8"
  - COMPILER="gcc-4.9"
  - COMPILER="clang-3.4"
  - COMPILER="clang-3.5"

# Setup repository sources before install
before_install:

  # Always use the thest toolchain so we update libstdc++
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test

  # clang 3.4
  - if [[ $COMPILER == clang* ]]; then sudo add-apt-repository -y ppa:h-rayflood/llvm; fi

  - sudo apt-get update -qq

# Install our required dependencies
install:
  # Always install gcc-4.8 in order to update libstdc++
  - sudo apt-get install -qq g++-4.8

  # gcc-4.8 we still need to change our cxx variable
  - if [[ "$COMPILER" == "gcc-4.8" ]]; then export CXX="g++-4.8"; fi
  - if [[ "$COMPILER" == "gcc-4.8" ]]; then export CC="gcc-4.8"; fi

    # gcc-4.9
  - if [[ "$COMPILER" == "gcc-4.9" ]]; then sudo apt-get install -qq g++-4.9; fi
  - if [[ "$COMPILER" == "gcc-4.9" ]]; then export CXX="g++-4.9"; fi
  - if [[ "$COMPILER" == "gcc-4.9" ]]; then export CC="gcc-4.9"; fi

  # clang 3.4
  - if [[ "$COMPILER" == "clang-3.4" ]]; then sudo apt-get install --allow-unauthenticated -qq clang-3.4; fi
  - if [[ "$COMPILER" == "clang-3.4" ]]; then export CXX="clang++-3.4"; fi
  - if [[ "$COMPILER" == "clang-3.4" ]]; then export CXX="clang-3.4"; fi

  # clang 3.5
  - if [[ "$COMPILER" == "clang-3.5" ]]; then sudo apt-get install --allow-unauthenticated -qq clang-3.5; fi
  - if [[ "$COMPILER" == "clang-3.5" ]]; then export CXX="clang++-3.5"; fi
  - if [[ "$COMPILER" == "clang-3.5" ]]; then export CXX="clang-3.5"; fi

  # Catch
  - wget https://raw.githubusercontent.com/philsquared/Catch/master/single_include/catch.hpp
  - sudo mv catch.hpp /usr/local/include

# Before our script is run (setup build)
before_script:
  - mkdir build
  - cd build
  - cmake ..

# Run our build
script:
  - make
  - ./tests/test_nuclear
